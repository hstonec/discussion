<script>
function createGroup(event) {
    event.preventDefault();
    $("#groupModal").modal("show");
    return false;
}

function openDepartment(event) {
    event.preventDefault();
    departID = $(this).attr("id");
    if (departID == "previous") {
        departID = parentStack.pop();
        
    } else {
        if (parentStack.length == 0)
            parentStack.push(1);
        else
            parentStack.push(previousID);
        previousID = departID;
    }
    
    $.post("ajax_get_depart_user.php",
           {"departid" : departID},
           function(data) {
               $("#departuserpanel").html(data);
               if ($("#departuserform div a").length > 0)
                   $("#departuserform div a").click(openDepartment);
               if ($("#previous").length > 0)
                   $("#previous").click(openDepartment);
               $("#createGroup").click(createGroup);
           },
           "text"
    );
}
$(document).ready(function() {
    $("#createGroup").click(createGroup);
    $("#departuserform div a").click(openDepartment);
    
    parentStack = [];
});
</script>